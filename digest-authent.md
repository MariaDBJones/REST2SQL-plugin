## **Digest Authentication over HTTPS **

### **1. Initial request (no credentials yet)**
**Client → Server:**
```http
GET /v1/login HTTP/1.1
Host: api.example.com
```

**Server → Client:** replies with **401 Unauthorized** and a challenge:
```http
WWW-Authenticate: Digest realm="MyAPI",
                  nonce="abc123xyz",
                  qop="auth",
                  algorithm=SHA-256,
                  opaque="opaqueToken123"
```

***

### **2. Client prepares authentication response**

**Known values:**
```text
username = "bob"
password = "secretPassword"
realm    = "MyAPI"        (from server)
nonce    = "abc123xyz"    (from server)
uri      = "/v1/login"    (request target)
method   = "GET"
qop      = "auth"
nc       = "00000001"     (nonce count, padded hex)
cnonce   = "xyz987"       (random string generated by client)
algorithm = SHA-256
```

**Digest calculations:**
```
HA1 = SHA256(username : realm : password)
    = SHA256("bob:MyAPI:secretPassword")

HA2 = SHA256(method : uri)
    = SHA256("GET:/v1/login")

response = SHA256(HA1 : nonce : nc : cnonce : qop : HA2)
```

(`:` means literal colon between values before hashing.  
All hashes are computed as lowercase hex strings of SHA-256 output.)

***

### **3. Client sends authenticated request**
```http
GET /v1/login HTTP/1.1
Host: api.example.com
Authorization: Digest username="bob",
               realm="MyAPI",
               nonce="abc123xyz",
               uri="/v1/login",
               qop=auth,
               nc=00000001,
               cnonce="xyz987",
               response="2f9d2c8f......",
               algorithm=SHA-256,
               opaque="opaqueToken123"
```

***

### **4. Server verifies**
1. Retrieve stored password for `bob` from database (store as SHA-256 hash or plain for this calc, depending on design).  
2. Recompute:
```
HA1 = SHA256("bob:MyAPI:secretPassword")
HA2 = SHA256("GET:/v1/login")
expected_response = SHA256(HA1 : nonce : nc : cnonce : qop : HA2)
```
3. Compare `expected_response` with the `response` from client:
   - If match → authentication success.
   - Else → respond with 401 Unauthorized.


